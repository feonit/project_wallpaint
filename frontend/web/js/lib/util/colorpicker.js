/*! wallpaint - v0.0.1 - 2013-11-26 */(function(e,t,i){function n(t){if(e.event&&e.event.contentOverflow!==i)return{x:e.event.offsetX,y:e.event.offsetY};if(t.offsetX!==i&&t.offsetY!==i)return{x:t.offsetX,y:t.offsetY};var n=t.target.parentNode.parentNode;return{x:t.layerX-n.offsetLeft,y:t.layerY-n.offsetTop}}function s(e,i,n){e=t.createElementNS(v,e);for(var s in i)e.setAttribute(s,i[s]);"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]);for(var o=0,a=n[0]&&n.length||0;a>o;o++)e.appendChild(n[o]);return e}function o(e){var t,i,n,s,o,a=e.h%360/60;o=e.v*e.s,s=o*(1-Math.abs(a%2-1)),t=i=n=e.v-o,a=~~a,t+=[o,s,0,0,s,o][a],i+=[s,o,o,s,0,0][a],n+=[0,0,s,o,o,s][a];var r=Math.floor(255*t),l=Math.floor(255*i),h=Math.floor(255*n);return{r:r,g:l,b:h,hex:"#"+(16777216|h|l<<8|r<<16).toString(16).slice(1)}}function a(e){var t=e.r,i=e.g,n=e.b;(e.r>1||e.g>1||e.b>1)&&(t/=255,i/=255,n/=255);var s,o,a,r;return a=Math.max(t,i,n),r=a-Math.min(t,i,n),s=0==r?null:a==t?(i-n)/r+(n>i?6:0):a==i?(n-t)/r+2:(t-i)/r+4,s=60*(s%6),o=0==r?0:r/a,{h:s,s:o,v:a}}function r(t,s,a){return function(r){r=r||e.event;var l=n(r);t.h=360*(l.y/s.offsetHeight)+g,t.s=t.v=1;var h=o({h:t.h,s:1,v:1});a.style.backgroundColor=h.hex,t.callback&&t.callback(h.hex,{h:t.h-g,s:t.s,v:t.v},{r:h.r,g:h.g,b:h.b},i,l)}}function l(t,i){return function(s){s=s||e.event;var a=n(s),r=i.offsetWidth,l=i.offsetHeight;t.s=a.x/r,t.v=(l-a.y)/l;var h=o(t);t.callback&&t.callback(h.hex,{h:t.h-g,s:t.s,v:t.v},{r:h.r,g:h.g,b:h.b},a)}}function h(e,t,i){if(!(this instanceof h))return new h(e,t,i);if(this.h=0,this.s=1,this.v=1,i)this.callback=i,this.pickerElement=t,this.slideElement=e;else{var n=e;n.innerHTML=b,this.slideElement=n.getElementsByClassName("slide")[0],this.pickerElement=n.getElementsByClassName("picker")[0];var s=n.getElementsByClassName("slide-indicator")[0],o=n.getElementsByClassName("picker-indicator")[0];h.fixIndicators(s,o),this.callback=function(e,i,n,a,r){h.positionIndicators(s,o,r,a),t(e,i,n)}}if("SVG"==m){var a=f.getElementsByTagName("linearGradient")[0],d=f.getElementsByTagName("rect")[0];a.id="gradient-hsv-"+y,d.setAttribute("fill","url(#"+a.id+")");var g=p.getElementsByTagName("linearGradient"),v=p.getElementsByTagName("rect");g[0].id="gradient-black-"+y,g[1].id="gradient-white-"+y,v[0].setAttribute("fill","url(#"+g[1].id+")"),v[1].setAttribute("fill","url(#"+g[0].id+")"),this.slideElement.appendChild(f.cloneNode(!0)),this.pickerElement.appendChild(p.cloneNode(!0)),y++}else this.slideElement.innerHTML=f,this.pickerElement.innerHTML=p;c(this.slideElement,"click",r(this,this.slideElement,this.pickerElement)),c(this.pickerElement,"click",l(this,this.pickerElement)),u(this,this.slideElement,r(this,this.slideElement,this.pickerElement)),u(this,this.pickerElement,l(this,this.pickerElement))}function c(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener&&e.addEventListener(t,i,!1)}function u(e,t,i){var n=!1;c(t,"mousedown",function(){n=!0}),c(t,"mouseup",function(){n=!1}),c(t,"mouseout",function(){n=!1}),c(t,"mousemove",function(e){n&&i(e)})}function d(e,t,i,n){e.h=t.h%360,e.s=t.s,e.v=t.v;var s=o(e),a={y:e.h*e.slideElement.offsetHeight/360,x:0},r=e.pickerElement.offsetHeight,l={x:e.s*e.pickerElement.offsetWidth,y:r-e.v*r};return e.pickerElement.style.backgroundColor=o({h:e.h,s:1,v:1}).hex,e.callback&&e.callback(n||s.hex,{h:e.h,s:e.s,v:e.v},i||{r:s.r,g:s.g,b:s.b},l,a),e}var p,f,m=e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",g=15,v="http://www.w3.org/2000/svg",b=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");"SVG"==m?(f=s("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[s("defs",{},s("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[s("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),s("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),s("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),s("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),s("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),s("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),s("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),s("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),s("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),s("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),p=s("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[s("defs",{},[s("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[s("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),s("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),s("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[s("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),s("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),s("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),s("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==m&&(f=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),p=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),t.namespaces.v||t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var y=0;h.hsv2rgb=function(e){var t=o(e);return delete t.hex,t},h.hsv2hex=function(e){return o(e).hex},h.rgb2hsv=a,h.rgb2hex=function(e){return o(a(e)).hex},h.hex2hsv=function(e){return a(h.hex2rgb(e))},h.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},h.prototype.setHsv=function(e){return d(this,e)},h.prototype.setRgb=function(e){return d(this,a(e),e)},h.prototype.setHex=function(e){return d(this,h.hex2hsv(e),i,e)},h.positionIndicators=function(e,t,i,n){i&&(t.style.left="auto",t.style.right="0px",t.style.top="0px",e.style.top=i.y-e.offsetHeight/2+"px"),n&&(t.style.top=n.y-t.offsetHeight/2+"px",t.style.left=n.x-t.offsetWidth/2+"px")},h.fixIndicators=function(e,t){t.style.pointerEvents="none",e.style.pointerEvents="none"},e.ColorPicker=h})(window,window.document);